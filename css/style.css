/* v11: add teacher quick-set controls */
:root{
  --bg1:#f7fbff; --bg2:#f2f3ff; --card:#ffffff; --text:#101828; --muted:#475467;
  --line: rgba(16,24,40,.10); --accent1:#6d5efc; --accent2:#00d1b2; --accent3:#ffcc00;
  --shadow: 0 10px 30px rgba(16,24,40,.10); --radius: 18px;
}
*{ box-sizing:border-box; }
html,body{
  margin:0; font-family: system-ui, sans-serif; color: var(--text);
  background:
    radial-gradient(1200px 700px at 10% 0%, rgba(109,94,252,.22), transparent 55%),
    radial-gradient(900px 600px at 90% 10%, rgba(0,209,178,.18), transparent 55%),
    radial-gradient(700px 500px at 50% 100%, rgba(255,204,0,.14), transparent 55%),
    radial-gradient(900px 600px at 55% 45%, rgba(255,90,150,.07), transparent 60%),
    linear-gradient(180deg, var(--bg1), var(--bg2));
}
.top{ background: rgba(255,255,255,.78); backdrop-filter: blur(8px); border-bottom: 1px solid var(--line); }
.top-inner{
  max-width: 1280px; margin: 0 auto; padding: 14px;
  display:grid; grid-template-columns: 340px 1fr 560px; gap: 14px; align-items:center;
}
.logos{ display:flex; gap:14px; align-items:center; padding:12px 14px; background:#fff; border-radius:999px; border:1px solid var(--line); }
.logo{ height:44px; } .logo-wide{ height:44px; }
.headline h1{ margin:6px 0 0 0; }
.hud{ display:flex; gap:12px; justify-content:flex-end; align-items:stretch; flex-wrap: wrap; }

.coin{
  display:flex; align-items:center; justify-content:center; gap:10px; padding:10px 12px;
  border-radius:14px; background:#fff; border:1px solid var(--line); min-width: 260px;
}
.coin-text{ white-space: nowrap; }
.coin-dot{ width:14px;height:14px;border-radius:50%; background: radial-gradient(circle at 30% 30%, #fff, var(--accent3)); }

.level-badge{
  display:inline-flex; align-items:center; justify-content:center; gap:8px; padding: 6px 12px;
  border-radius: 999px; font-weight: 900;
  background: linear-gradient(90deg, var(--accent1), var(--accent2));
  color: white; font-size: .86rem; white-space: nowrap; text-align:center; min-width: 150px;
}
.lvl-emoji{ display:inline-block; width: 1.2em; text-align:center; }
.level-badge.pulse{ animation: pulse .35s ease-out; }
@keyframes pulse{ 0%{transform:scale(1)} 50%{transform:scale(1.07)} 100%{transform:scale(1)} }

.progress-wrap{
  padding:10px 12px; border-radius:14px; background:#fff; border:1px solid var(--line);
  min-width: 280px; flex: 1;
}
.progress-row{ display:flex; align-items:center; gap:10px; }
.progress-label-mini{ font-size:.85rem; color: var(--muted); min-width: 78px; }

.progress-bar-auto{
  position: relative; height:10px; background:#eee; border-radius:999px; overflow:hidden; flex: 1;
}
.progress-fill-auto{
  height:100%; width:0%;
  background: linear-gradient(90deg, rgba(255,204,0,.78), rgba(109,94,252,.70));
  border-radius:999px; transition: width .35s ease;
}
.progress-bar-auto.markers .mk{
  position:absolute; top: -3px; width:2px; height:16px;
  background: rgba(16,24,40,.18); border-radius: 2px; pointer-events:none;
}
.progress-bar-auto.markers .mk.major{ width:3px; background: rgba(16,24,40,.30); }
.progress-pct{ font-weight: 900; min-width: 44px; text-align:right; }

.timer-actions{ display:flex; gap:10px; margin-top:10px; }

.btn{ display:block; margin:14px; padding:14px; text-align:center; border-radius:14px;
  background: linear-gradient(90deg, var(--accent1), var(--accent2));
  color:white; text-decoration:none; font-weight:900; border: none; }
.btn.ghost{ background:#fff; color:var(--text); border:1px solid var(--line); cursor: pointer; margin: 0; flex: 1; padding: 12px; }
.btn.ghost.small{ padding: 10px 12px; font-weight: 900; }

/* Teacher tools */
.teacher-tools{
  margin-top: 10px;
  border-top: 1px dashed rgba(16,24,40,.14);
  padding-top: 10px;
}
.teacher-tools summary{
  cursor: pointer;
  font-weight: 900;
  color: rgba(16,24,40,.75);
  user-select: none;
}
.teacher-inner{
  margin-top: 10px;
  display:flex;
  flex-direction: column;
  gap:10px;
}
.teacher-row{
  display:flex;
  gap:8px;
  flex-wrap: wrap;
}
.btn.ghost.tiny{
  padding: 8px 10px;
  font-weight: 900;
  flex: 0 0 auto;
}
.teacher-slider{
  align-items: center;
}
.teacher-slider label{
  font-weight: 800;
  color: var(--muted);
}
.teacher-slider input[type="range"]{
  flex: 1;
  min-width: 160px;
}
.teacher-val{
  font-weight: 1000;
  min-width: 48px;
  text-align:right;
}
.teacher-hint{
  font-size: .86rem;
  color: var(--muted);
}

.grid{ max-width:1280px; margin:0 auto; padding:16px; display:grid; grid-template-columns: 2.2fr 1fr; gap:16px; }
.card{ background:#fff; border-radius:var(--radius); border:1px solid var(--line); box-shadow:var(--shadow); }
.card-head{ padding:14px; border-bottom:1px solid var(--line); }
.note{ margin: 6px 0 0 0; color: var(--muted); font-size: .92rem; }
.frame{ padding:12px; }
iframe{ width:100%; height:70vh; min-height:520px; border:0; border-radius:14px; }

.card-side .mini{ padding:14px; }
.mini-title{ font-weight: 1000; margin-bottom: 8px; }
.btn.coin-big{
  background: linear-gradient(90deg, rgba(255,204,0,.35), rgba(109,94,252,.25));
  font-size: 1.15rem; padding: 18px; width: calc(100% - 28px); margin: 14px;
  border:1px solid rgba(16,24,40,.10);
}

/* Toasts */
.toast{
  position: fixed; top: 18%; left: 50%; transform: translateX(-50%) scale(.85);
  background: linear-gradient(90deg, var(--accent1), var(--accent2)); color: white;
  padding: 18px 28px; border-radius: 999px; font-size: 1.6rem; font-weight: 1000;
  box-shadow: 0 20px 40px rgba(109,94,252,.35);
  opacity: 0; pointer-events: none; transition: opacity .18s ease, transform .18s ease;
  z-index: 999; text-align:center; white-space: nowrap;
}
.toast.show{ opacity: 1; transform: translateX(-50%) scale(1); }

.toast-highscore{
  top: 28%;
  background: linear-gradient(90deg, rgba(255,204,0,.96), rgba(109,94,252,.96));
  box-shadow: 0 26px 60px rgba(255,204,0,.28);
}
.toast-highscore.show{ animation: glow 1.2s ease-in-out infinite; }
@keyframes glow{
  0%{ filter: drop-shadow(0 10px 18px rgba(255,204,0,.25)); transform: translateX(-50%) scale(1); }
  50%{ filter: drop-shadow(0 18px 28px rgba(255,204,0,.40)); transform: translateX(-50%) scale(1.03); }
  100%{ filter: drop-shadow(0 10px 18px rgba(255,204,0,.25)); transform: translateX(-50%) scale(1); }
}

.toast-boss{ top: 22%; background: linear-gradient(90deg, rgba(255,90,150,.92), rgba(109,94,252,.92)); box-shadow: 0 24px 54px rgba(255,90,150,.22); }

/* Confetti */
.confetti-layer{ position: fixed; inset: 0; pointer-events: none; overflow: hidden; z-index: 998; }
.confetti{ position: absolute; top: 22vh; border-radius: 3px; animation: confetti-fall var(--dur) ease-out forwards; }
@keyframes confetti-fall{ 0%{transform:translate(0,0) rotate(0deg); opacity:1} 100%{transform:translate(var(--dx),620px) rotate(var(--dr)); opacity:0} }

/* Boss overlay */
.boss-overlay{ position: fixed; inset: 0; display:none; align-items:center; justify-content:center;
  background: rgba(16,24,40,.35); backdrop-filter: blur(8px); z-index: 1001; }
.boss-overlay.show{ display:flex; }
.boss-card{
  width: min(520px, 92vw); background: rgba(255,255,255,.92);
  border: 1px solid rgba(16,24,40,.12); border-radius: 22px;
  box-shadow: 0 30px 70px rgba(16,24,40,.25);
  padding: 22px; text-align:center; animation: boss-in .45s ease-out;
}
@keyframes boss-in{ 0%{transform:translateY(10px) scale(.96); opacity:0} 100%{transform:translateY(0) scale(1); opacity:1} }
.boss-title{ font-weight: 1000; font-size: 1.55rem; }
.boss-sub{ margin-top: 8px; color: var(--muted); font-weight: 700; }
.boss-badges{ margin-top: 14px; display:flex; gap:10px; justify-content:center; flex-wrap: wrap; }
.boss-chip{
  display:inline-flex; align-items:center; justify-content:center; padding: 8px 12px;
  border-radius: 999px; border: 1px solid rgba(16,24,40,.12);
  background: linear-gradient(90deg, rgba(109,94,252,.12), rgba(0,209,178,.10)); font-weight: 900;
}
.boss-close{ margin-top: 16px; width: 100%; }

@media (max-width:1100px){
  .top-inner{ grid-template-columns:1fr; }
  .grid{ grid-template-columns:1fr; }
  .toast{ font-size: 1.2rem; }
  .coin{ min-width: unset; }
}
